================================================================================
PHASE TEST LOG: Complex Mixed Scenario
================================================================================
Generated: 2025-11-28T11:00:45.706Z
Steps: 2
Completed: Yes

================================================================================


────────────────────────────────────────────────────────────────────────────────
STEP 0
────────────────────────────────────────────────────────────────────────────────

[12:00:45 PM] STATE
  State snapshot: Initial State
  Data:
    {
      turn: 1,
      phase: choam_charity,
      factions: [
        bene_gesserit,
        atreides,
        fremen,
        harkonnen,
      ],
      factionStates: [
        {
          faction: bene_gesserit,
          spice: 3,
          forcesOnBoard: [
            {
              territory: polar_sink,
              sector: 0,
              regular: 1,
              elite: 0,
              advisors: 1,
            },
          ],
          forcesInReserves: {
            regular: 19,
            elite: 0,
          },
          forcesInTanks: {
            regular: 0,
            elite: 0,
          },
          leaders: [
            {
              id: reverend_mother,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: bene_gesserit,
            },
            {
              id: princess_irulan,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: bene_gesserit,
            },
            {
              id: wanna_marcus,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: bene_gesserit,
            },
            {
              id: margot_fenring,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: bene_gesserit,
            },
            {
              id: alia,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: bene_gesserit,
            },
          ],
          handSize: 1,
          traitors: 0,
        },
        {
          faction: atreides,
          spice: 0,
          forcesOnBoard: [
            {
              territory: arrakeen,
              sector: 9,
              regular: 10,
              elite: 0,
              advisors: null,
            },
          ],
          forcesInReserves: {
            regular: 10,
            elite: 0,
          },
          forcesInTanks: {
            regular: 0,
            elite: 0,
          },
          leaders: [
            {
              id: paul_atreides,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: atreides,
            },
            {
              id: gurney_halleck,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: atreides,
            },
            {
              id: duncan_idaho,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: atreides,
            },
            {
              id: thufir_hawat,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: atreides,
            },
            {
              id: dr_yueh,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: atreides,
            },
          ],
          handSize: 1,
          traitors: 0,
        },
        {
          faction: fremen,
          spice: 1,
          forcesOnBoard: [],
          forcesInReserves: {
            regular: 20,
            elite: 0,
          },
          forcesInTanks: {
            regular: 0,
            elite: 0,
          },
          leaders: [
            {
              id: stilgar,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: fremen,
            },
            {
              id: chani,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: fremen,
            },
            {
              id: otheym,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: fremen,
            },
            {
              id: jamis,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: fremen,
            },
            {
              id: shadout_mapes,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: fremen,
            },
          ],
          handSize: 1,
          traitors: 0,
        },
        {
          faction: harkonnen,
          spice: 5,
          forcesOnBoard: [
            {
              territory: carthag,
              sector: 11,
              regular: 10,
              elite: 0,
              advisors: null,
            },
          ],
          forcesInReserves: {
            regular: 10,
            elite: 0,
          },
          forcesInTanks: {
            regular: 0,
            elite: 0,
          },
          leaders: [
            {
              id: feyd_rautha,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: harkonnen,
            },
            {
              id: beast_rabban,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: harkonnen,
            },
            {
              id: piter_de_vries,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: harkonnen,
            },
            {
              id: captain_iakin_nefud,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: harkonnen,
            },
            {
              id: umman_kudu,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: harkonnen,
            },
          ],
          handSize: 2,
          traitors: 0,
        },
      ],
      spiceOnBoard: [],
      stormSector: 0,
      stormOrder: [
        bene_gesserit,
        atreides,
        fremen,
        harkonnen,
      ],
    }

[12:00:45 PM] INFO
  Starting scenario: Complex Mixed Scenario

[12:00:45 PM] INFO
  Queued 3 agent responses

[12:00:45 PM] EVENT
  CHOAM Charity: 3 factions eligible
  Data:
    {
      eventType: CHOAM_ELIGIBLE,
      data: {
        eligibleFactions: [
          bene_gesserit,
          atreides,
          fremen,
        ],
      },
    }


────────────────────────────────────────────────────────────────────────────────
STEP 1
────────────────────────────────────────────────────────────────────────────────

[12:00:45 PM] REQUEST
  bene_gesserit requested: CLAIM_CHARITY
  Data:
    {
      faction: bene_gesserit,
      requestType: CLAIM_CHARITY,
      prompt: You have 3 spice and are eligible for CHOAM Charity (2 spice). Do you want to claim it?,
      context: {
        currentSpice: 3,
        charityAmount: 2,
      },
      availableActions: [
        CLAIM_CHARITY,
        PASS,
      ],
    }

[12:00:45 PM] REQUEST
  atreides requested: CLAIM_CHARITY
  Data:
    {
      faction: atreides,
      requestType: CLAIM_CHARITY,
      prompt: You have 0 spice and are eligible for CHOAM Charity (2 spice). Do you want to claim it?,
      context: {
        currentSpice: 0,
        charityAmount: 2,
      },
      availableActions: [
        CLAIM_CHARITY,
        PASS,
      ],
    }

[12:00:45 PM] REQUEST
  fremen requested: CLAIM_CHARITY
  Data:
    {
      faction: fremen,
      requestType: CLAIM_CHARITY,
      prompt: You have 1 spice and are eligible for CHOAM Charity (2 spice). Do you want to claim it?,
      context: {
        currentSpice: 1,
        charityAmount: 2,
      },
      availableActions: [
        CLAIM_CHARITY,
        PASS,
      ],
    }


────────────────────────────────────────────────────────────────────────────────
STEP 2
────────────────────────────────────────────────────────────────────────────────

[12:00:45 PM] REQUEST
  bene_gesserit requested: CLAIM_CHARITY
  Data:
    {
      faction: bene_gesserit,
      requestType: CLAIM_CHARITY,
      prompt: You have 3 spice and are eligible for CHOAM Charity (2 spice). Do you want to claim it?,
      context: {
        currentSpice: 3,
        charityAmount: 2,
      },
      availableActions: [
        CLAIM_CHARITY,
        PASS,
      ],
    }

[12:00:45 PM] REQUEST
  atreides requested: CLAIM_CHARITY
  Data:
    {
      faction: atreides,
      requestType: CLAIM_CHARITY,
      prompt: You have 0 spice and are eligible for CHOAM Charity (2 spice). Do you want to claim it?,
      context: {
        currentSpice: 0,
        charityAmount: 2,
      },
      availableActions: [
        CLAIM_CHARITY,
        PASS,
      ],
    }

[12:00:45 PM] REQUEST
  fremen requested: CLAIM_CHARITY
  Data:
    {
      faction: fremen,
      requestType: CLAIM_CHARITY,
      prompt: You have 1 spice and are eligible for CHOAM Charity (2 spice). Do you want to claim it?,
      context: {
        currentSpice: 1,
        charityAmount: 2,
      },
      availableActions: [
        CLAIM_CHARITY,
        PASS,
      ],
    }

[12:00:45 PM] RESPONSE
  bene_gesserit responded: CLAIM_CHARITY (passed: false)
  Data:
    {
      faction: bene_gesserit,
      actionType: CLAIM_CHARITY,
      data: {},
      passed: false,
    }

[12:00:45 PM] RESPONSE
  atreides responded: PASS (passed: true)
  Data:
    {
      faction: atreides,
      actionType: PASS,
      data: {},
      passed: true,
    }

[12:00:45 PM] RESPONSE
  fremen responded: CLAIM_CHARITY (passed: false)
  Data:
    {
      faction: fremen,
      actionType: CLAIM_CHARITY,
      data: {},
      passed: false,
    }

[12:00:45 PM] EVENT
  bene_gesserit claims 2 spice in CHOAM Charity (3 → 5)
  Data:
    {
      eventType: CHARITY_CLAIMED,
      data: {
        faction: bene_gesserit,
        amount: 2,
        newTotal: 5,
      },
    }

[12:00:45 PM] EVENT
  fremen claims 1 spice in CHOAM Charity (1 → 2)
  Data:
    {
      eventType: CHARITY_CLAIMED,
      data: {
        faction: fremen,
        amount: 1,
        newTotal: 2,
      },
    }

[12:00:45 PM] STATE
  State snapshot: After step 2
  Data:
    {
      turn: 1,
      phase: choam_charity,
      factions: [
        bene_gesserit,
        atreides,
        fremen,
        harkonnen,
      ],
      factionStates: [
        {
          faction: bene_gesserit,
          spice: 5,
          forcesOnBoard: [
            {
              territory: polar_sink,
              sector: 0,
              regular: 1,
              elite: 0,
              advisors: 1,
            },
          ],
          forcesInReserves: {
            regular: 19,
            elite: 0,
          },
          forcesInTanks: {
            regular: 0,
            elite: 0,
          },
          leaders: [
            {
              id: reverend_mother,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: bene_gesserit,
            },
            {
              id: princess_irulan,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: bene_gesserit,
            },
            {
              id: wanna_marcus,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: bene_gesserit,
            },
            {
              id: margot_fenring,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: bene_gesserit,
            },
            {
              id: alia,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: bene_gesserit,
            },
          ],
          handSize: 1,
          traitors: 0,
        },
        {
          faction: atreides,
          spice: 0,
          forcesOnBoard: [
            {
              territory: arrakeen,
              sector: 9,
              regular: 10,
              elite: 0,
              advisors: null,
            },
          ],
          forcesInReserves: {
            regular: 10,
            elite: 0,
          },
          forcesInTanks: {
            regular: 0,
            elite: 0,
          },
          leaders: [
            {
              id: paul_atreides,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: atreides,
            },
            {
              id: gurney_halleck,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: atreides,
            },
            {
              id: duncan_idaho,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: atreides,
            },
            {
              id: thufir_hawat,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: atreides,
            },
            {
              id: dr_yueh,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: atreides,
            },
          ],
          handSize: 1,
          traitors: 0,
        },
        {
          faction: fremen,
          spice: 2,
          forcesOnBoard: [],
          forcesInReserves: {
            regular: 20,
            elite: 0,
          },
          forcesInTanks: {
            regular: 0,
            elite: 0,
          },
          leaders: [
            {
              id: stilgar,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: fremen,
            },
            {
              id: chani,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: fremen,
            },
            {
              id: otheym,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: fremen,
            },
            {
              id: jamis,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: fremen,
            },
            {
              id: shadout_mapes,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: fremen,
            },
          ],
          handSize: 1,
          traitors: 0,
        },
        {
          faction: harkonnen,
          spice: 5,
          forcesOnBoard: [
            {
              territory: carthag,
              sector: 11,
              regular: 10,
              elite: 0,
              advisors: null,
            },
          ],
          forcesInReserves: {
            regular: 10,
            elite: 0,
          },
          forcesInTanks: {
            regular: 0,
            elite: 0,
          },
          leaders: [
            {
              id: feyd_rautha,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: harkonnen,
            },
            {
              id: beast_rabban,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: harkonnen,
            },
            {
              id: piter_de_vries,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: harkonnen,
            },
            {
              id: captain_iakin_nefud,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: harkonnen,
            },
            {
              id: umman_kudu,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: harkonnen,
            },
          ],
          handSize: 2,
          traitors: 0,
        },
      ],
      spiceOnBoard: [],
      stormSector: 0,
      stormOrder: [
        bene_gesserit,
        atreides,
        fremen,
        harkonnen,
      ],
    }

[12:00:45 PM] STATE
  State snapshot: Final State
  Data:
    {
      turn: 1,
      phase: choam_charity,
      factions: [
        bene_gesserit,
        atreides,
        fremen,
        harkonnen,
      ],
      factionStates: [
        {
          faction: bene_gesserit,
          spice: 5,
          forcesOnBoard: [
            {
              territory: polar_sink,
              sector: 0,
              regular: 1,
              elite: 0,
              advisors: 1,
            },
          ],
          forcesInReserves: {
            regular: 19,
            elite: 0,
          },
          forcesInTanks: {
            regular: 0,
            elite: 0,
          },
          leaders: [
            {
              id: reverend_mother,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: bene_gesserit,
            },
            {
              id: princess_irulan,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: bene_gesserit,
            },
            {
              id: wanna_marcus,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: bene_gesserit,
            },
            {
              id: margot_fenring,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: bene_gesserit,
            },
            {
              id: alia,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: bene_gesserit,
            },
          ],
          handSize: 1,
          traitors: 0,
        },
        {
          faction: atreides,
          spice: 0,
          forcesOnBoard: [
            {
              territory: arrakeen,
              sector: 9,
              regular: 10,
              elite: 0,
              advisors: null,
            },
          ],
          forcesInReserves: {
            regular: 10,
            elite: 0,
          },
          forcesInTanks: {
            regular: 0,
            elite: 0,
          },
          leaders: [
            {
              id: paul_atreides,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: atreides,
            },
            {
              id: gurney_halleck,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: atreides,
            },
            {
              id: duncan_idaho,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: atreides,
            },
            {
              id: thufir_hawat,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: atreides,
            },
            {
              id: dr_yueh,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: atreides,
            },
          ],
          handSize: 1,
          traitors: 0,
        },
        {
          faction: fremen,
          spice: 2,
          forcesOnBoard: [],
          forcesInReserves: {
            regular: 20,
            elite: 0,
          },
          forcesInTanks: {
            regular: 0,
            elite: 0,
          },
          leaders: [
            {
              id: stilgar,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: fremen,
            },
            {
              id: chani,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: fremen,
            },
            {
              id: otheym,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: fremen,
            },
            {
              id: jamis,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: fremen,
            },
            {
              id: shadout_mapes,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: fremen,
            },
          ],
          handSize: 1,
          traitors: 0,
        },
        {
          faction: harkonnen,
          spice: 5,
          forcesOnBoard: [
            {
              territory: carthag,
              sector: 11,
              regular: 10,
              elite: 0,
              advisors: null,
            },
          ],
          forcesInReserves: {
            regular: 10,
            elite: 0,
          },
          forcesInTanks: {
            regular: 0,
            elite: 0,
          },
          leaders: [
            {
              id: feyd_rautha,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: harkonnen,
            },
            {
              id: beast_rabban,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: harkonnen,
            },
            {
              id: piter_de_vries,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: harkonnen,
            },
            {
              id: captain_iakin_nefud,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: harkonnen,
            },
            {
              id: umman_kudu,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: harkonnen,
            },
          ],
          handSize: 2,
          traitors: 0,
        },
      ],
      spiceOnBoard: [],
      stormSector: 0,
      stormOrder: [
        bene_gesserit,
        atreides,
        fremen,
        harkonnen,
      ],
    }

[12:00:45 PM] INFO
  Phase completed successfully


================================================================================
SUMMARY
================================================================================

Total Steps: 2
Total Events: 2
Completed: Yes

Events:
  1. [CHARITY_CLAIMED] bene_gesserit claims 2 spice in CHOAM Charity (3 → 5)
  2. [CHARITY_CLAIMED] fremen claims 1 spice in CHOAM Charity (1 → 2)

Final State:
  Turn: 1
  Phase: choam_charity
  Factions: bene_gesserit, atreides, fremen, harkonnen

  bene_gesserit:
    Spice: 5
    Forces on board: 1 stacks
    Forces in reserves: 19 regular, 0 elite
    Leaders: 5 total
    Hand size: 1
  atreides:
    Spice: 0
    Forces on board: 1 stacks
    Forces in reserves: 10 regular, 0 elite
    Leaders: 5 total
    Hand size: 1
  fremen:
    Spice: 2
    Forces on board: 0 stacks
    Forces in reserves: 20 regular, 0 elite
    Leaders: 5 total
    Hand size: 1
  harkonnen:
    Spice: 5
    Forces on board: 1 stacks
    Forces in reserves: 10 regular, 0 elite
    Leaders: 5 total
    Hand size: 2

================================================================================
END OF LOG
================================================================================