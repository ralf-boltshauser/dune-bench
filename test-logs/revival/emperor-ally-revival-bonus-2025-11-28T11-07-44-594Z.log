================================================================================
PHASE TEST LOG: Emperor Ally Revival Bonus
================================================================================
Generated: 2025-11-28T11:07:44.594Z
Steps: 2
Completed: Yes

================================================================================


────────────────────────────────────────────────────────────────────────────────
STEP 0
────────────────────────────────────────────────────────────────────────────────

[12:07:44 PM] STATE
  State snapshot: Initial State
  Data:
    {
      turn: 2,
      phase: revival,
      factions: [
        emperor,
        atreides,
      ],
      factionStates: [
        {
          faction: emperor,
          spice: 40,
          forcesOnBoard: [],
          forcesInReserves: {
            regular: 25,
            elite: 0,
          },
          forcesInTanks: {
            regular: 5,
            elite: 0,
          },
          leaders: [
            {
              id: shaddam_iv,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: emperor,
            },
            {
              id: hasimir_fenring,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: emperor,
            },
            {
              id: captain_aramsham,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: emperor,
            },
            {
              id: caid,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: emperor,
            },
            {
              id: bashar,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: emperor,
            },
          ],
          handSize: 1,
          traitors: 0,
        },
        {
          faction: atreides,
          spice: 30,
          forcesOnBoard: [
            {
              territory: arrakeen,
              sector: 9,
              regular: 10,
              elite: 0,
              advisors: null,
            },
          ],
          forcesInReserves: {
            regular: 20,
            elite: 0,
          },
          forcesInTanks: {
            regular: 10,
            elite: 0,
          },
          leaders: [
            {
              id: paul_atreides,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: atreides,
            },
            {
              id: gurney_halleck,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: atreides,
            },
            {
              id: duncan_idaho,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: atreides,
            },
            {
              id: thufir_hawat,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: atreides,
            },
            {
              id: dr_yueh,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: atreides,
            },
          ],
          handSize: 1,
          traitors: 0,
        },
      ],
      spiceOnBoard: [],
      stormSector: 0,
      stormOrder: [
        emperor,
        atreides,
      ],
    }

[12:07:44 PM] INFO
  Starting scenario: Emperor Ally Revival Bonus

[12:07:44 PM] INFO
  Queued 2 agent responses


────────────────────────────────────────────────────────────────────────────────
STEP 1
────────────────────────────────────────────────────────────────────────────────

[12:07:44 PM] REQUEST
  emperor requested: REVIVE_FORCES
  Data:
    {
      faction: emperor,
      requestType: REVIVE_FORCES,
      prompt: Revival phase. You have 5 forces in tanks. You get 1 forces for FREE. You may revive up to 2 ADDITIONAL forces beyond your free revival at 2 spice each. How many ADDITIONAL forces do you want to revive? (0 to 2) EMPEROR ALLIANCE ABILITY: You can pay 2 spice per force to revive up to 3 extra forces for your ally atreides (they have 10 in tanks). Use emperor_pay_ally_revival tool.,
      context: {
        forcesInTanks: 5,
        freeRevivalLimit: 1,
        maxAdditionalForces: 2,
        maxRevivalLimit: 3,
        paidRevivalCost: 2,
        spiceAvailable: 40,
        revivableLeaders: [],
        emperorAllyRevival: {
          allyId: atreides,
          allyForcesInTanks: 10,
          emperorBonusAvailable: 3,
          costPerForce: 2,
        },
      },
      availableActions: [
        REVIVE_FORCES,
        REVIVE_LEADER,
        PASS,
      ],
    }

[12:07:44 PM] REQUEST
  atreides requested: REVIVE_FORCES
  Data:
    {
      faction: atreides,
      requestType: REVIVE_FORCES,
      prompt: Revival phase. You have 10 forces in tanks. You get 2 forces for FREE. You may revive up to 1 ADDITIONAL forces beyond your free revival at 2 spice each. How many ADDITIONAL forces do you want to revive? (0 to 1),
      context: {
        forcesInTanks: 10,
        freeRevivalLimit: 2,
        maxAdditionalForces: 1,
        maxRevivalLimit: 3,
        paidRevivalCost: 2,
        spiceAvailable: 30,
        revivableLeaders: [],
        kwisatzHaderachDead: false,
        kwisatzHaderachRevivalCost: 2,
        canReviveKwisatzHaderach: false,
      },
      availableActions: [
        REVIVE_FORCES,
        REVIVE_LEADER,
        PASS,
      ],
    }


────────────────────────────────────────────────────────────────────────────────
STEP 2
────────────────────────────────────────────────────────────────────────────────

[12:07:44 PM] REQUEST
  emperor requested: REVIVE_FORCES
  Data:
    {
      faction: emperor,
      requestType: REVIVE_FORCES,
      prompt: Revival phase. You have 5 forces in tanks. You get 1 forces for FREE. You may revive up to 2 ADDITIONAL forces beyond your free revival at 2 spice each. How many ADDITIONAL forces do you want to revive? (0 to 2) EMPEROR ALLIANCE ABILITY: You can pay 2 spice per force to revive up to 3 extra forces for your ally atreides (they have 10 in tanks). Use emperor_pay_ally_revival tool.,
      context: {
        forcesInTanks: 5,
        freeRevivalLimit: 1,
        maxAdditionalForces: 2,
        maxRevivalLimit: 3,
        paidRevivalCost: 2,
        spiceAvailable: 40,
        revivableLeaders: [],
        emperorAllyRevival: {
          allyId: atreides,
          allyForcesInTanks: 10,
          emperorBonusAvailable: 3,
          costPerForce: 2,
        },
      },
      availableActions: [
        REVIVE_FORCES,
        REVIVE_LEADER,
        PASS,
      ],
    }

[12:07:44 PM] REQUEST
  atreides requested: REVIVE_FORCES
  Data:
    {
      faction: atreides,
      requestType: REVIVE_FORCES,
      prompt: Revival phase. You have 10 forces in tanks. You get 2 forces for FREE. You may revive up to 1 ADDITIONAL forces beyond your free revival at 2 spice each. How many ADDITIONAL forces do you want to revive? (0 to 1),
      context: {
        forcesInTanks: 10,
        freeRevivalLimit: 2,
        maxAdditionalForces: 1,
        maxRevivalLimit: 3,
        paidRevivalCost: 2,
        spiceAvailable: 30,
        revivableLeaders: [],
        kwisatzHaderachDead: false,
        kwisatzHaderachRevivalCost: 2,
        canReviveKwisatzHaderach: false,
      },
      availableActions: [
        REVIVE_FORCES,
        REVIVE_LEADER,
        PASS,
      ],
    }

[12:07:44 PM] RESPONSE
  atreides responded: REVIVE_FORCES (passed: false)
  Data:
    {
      faction: atreides,
      actionType: REVIVE_FORCES,
      data: {
        count: 1,
      },
      passed: false,
    }

[12:07:44 PM] RESPONSE
  emperor responded: REVIVE_FORCES (passed: false)
  Data:
    {
      faction: emperor,
      actionType: REVIVE_FORCES,
      data: {
        count: 0,
      },
      passed: false,
    }

[12:07:44 PM] EVENT
  atreides revives 3 forces (2 free, 1 paid for 2 spice)
  Data:
    {
      eventType: FORCES_REVIVED,
      data: {
        faction: atreides,
        count: 3,
        cost: 2,
      },
    }

[12:07:44 PM] EVENT
  emperor revives 1 forces (1 free, 0 paid for 0 spice)
  Data:
    {
      eventType: FORCES_REVIVED,
      data: {
        faction: emperor,
        count: 1,
        cost: 0,
      },
    }

[12:07:44 PM] STATE
  State snapshot: After step 2
  Data:
    {
      turn: 2,
      phase: revival,
      factions: [
        emperor,
        atreides,
      ],
      factionStates: [
        {
          faction: emperor,
          spice: 40,
          forcesOnBoard: [],
          forcesInReserves: {
            regular: 26,
            elite: 0,
          },
          forcesInTanks: {
            regular: 4,
            elite: 0,
          },
          leaders: [
            {
              id: shaddam_iv,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: emperor,
            },
            {
              id: hasimir_fenring,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: emperor,
            },
            {
              id: captain_aramsham,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: emperor,
            },
            {
              id: caid,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: emperor,
            },
            {
              id: bashar,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: emperor,
            },
          ],
          handSize: 1,
          traitors: 0,
        },
        {
          faction: atreides,
          spice: 28,
          forcesOnBoard: [
            {
              territory: arrakeen,
              sector: 9,
              regular: 10,
              elite: 0,
              advisors: null,
            },
          ],
          forcesInReserves: {
            regular: 23,
            elite: 0,
          },
          forcesInTanks: {
            regular: 7,
            elite: 0,
          },
          leaders: [
            {
              id: paul_atreides,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: atreides,
            },
            {
              id: gurney_halleck,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: atreides,
            },
            {
              id: duncan_idaho,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: atreides,
            },
            {
              id: thufir_hawat,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: atreides,
            },
            {
              id: dr_yueh,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: atreides,
            },
          ],
          handSize: 1,
          traitors: 0,
        },
      ],
      spiceOnBoard: [],
      stormSector: 0,
      stormOrder: [
        emperor,
        atreides,
      ],
    }

[12:07:44 PM] STATE
  State snapshot: Final State
  Data:
    {
      turn: 2,
      phase: revival,
      factions: [
        emperor,
        atreides,
      ],
      factionStates: [
        {
          faction: emperor,
          spice: 40,
          forcesOnBoard: [],
          forcesInReserves: {
            regular: 26,
            elite: 0,
          },
          forcesInTanks: {
            regular: 4,
            elite: 0,
          },
          leaders: [
            {
              id: shaddam_iv,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: emperor,
            },
            {
              id: hasimir_fenring,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: emperor,
            },
            {
              id: captain_aramsham,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: emperor,
            },
            {
              id: caid,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: emperor,
            },
            {
              id: bashar,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: emperor,
            },
          ],
          handSize: 1,
          traitors: 0,
        },
        {
          faction: atreides,
          spice: 28,
          forcesOnBoard: [
            {
              territory: arrakeen,
              sector: 9,
              regular: 10,
              elite: 0,
              advisors: null,
            },
          ],
          forcesInReserves: {
            regular: 23,
            elite: 0,
          },
          forcesInTanks: {
            regular: 7,
            elite: 0,
          },
          leaders: [
            {
              id: paul_atreides,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: atreides,
            },
            {
              id: gurney_halleck,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: atreides,
            },
            {
              id: duncan_idaho,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: atreides,
            },
            {
              id: thufir_hawat,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: atreides,
            },
            {
              id: dr_yueh,
              location: leader_pool,
              usedThisTurn: false,
              capturedBy: null,
              originalFaction: atreides,
            },
          ],
          handSize: 1,
          traitors: 0,
        },
      ],
      spiceOnBoard: [],
      stormSector: 0,
      stormOrder: [
        emperor,
        atreides,
      ],
    }

[12:07:44 PM] INFO
  Phase completed successfully


================================================================================
SUMMARY
================================================================================

Total Steps: 2
Total Events: 2
Completed: Yes

Events:
  1. [FORCES_REVIVED] atreides revives 3 forces (2 free, 1 paid for 2 spice)
  2. [FORCES_REVIVED] emperor revives 1 forces (1 free, 0 paid for 0 spice)

Final State:
  Turn: 2
  Phase: revival
  Factions: emperor, atreides

  emperor:
    Spice: 40
    Forces on board: 0 stacks
    Forces in reserves: 26 regular, 0 elite
    Leaders: 5 total
    Hand size: 1
  atreides:
    Spice: 28
    Forces on board: 1 stacks
    Forces in reserves: 23 regular, 0 elite
    Leaders: 5 total
    Hand size: 1

================================================================================
END OF LOG
================================================================================